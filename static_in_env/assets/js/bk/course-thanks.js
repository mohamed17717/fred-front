const bk="https://thegoodzone.pythonanywhere.com";function getBoughtCourseFromLocalStorage(){return JSON.parse(localStorage.getItem("bought")||"[]")}function setBoughtCourseInLocalStorage(courseId){const bought=getBoughtCourseFromLocalStorage();bought.push(courseId),localStorage.setItem("bought",JSON.stringify(bought))}function checkBoughtCourse(courseId){return getBoughtCourseFromLocalStorage().includes(courseId)}function courseBought(){const courseBtn=document.querySelector("#thanks-intro button");if(!courseBtn)return;const courseId=courseBtn.dataset.to,url=`${bk}/buy-course/${courseId}/`;checkBoughtCourse(courseId)||(fetch(url),setBoughtCourseInLocalStorage(courseId))}function getCourseStars(average){const count=5,star1='<div class="icon icon-star-fill"></div>',star0='<div class="icon icon-star-outline"></div>';let stars="";for(let i=0;i<5;i++)stars+=average>.44?star1:star0,average--;return stars}function getRecommendedCourses(){const courseIdElm=document.querySelector("[data-courseid]");if(!courseIdElm)return;const courseId=courseIdElm.dataset.courseid,section=document.querySelector("#recommended-courses"),container=section.querySelector(".courses ul"),url=`${bk}/random-related-courses/${courseId}/`;fetch(url).then(res=>200===res.status?res.json():[]).then(data=>{data.forEach(course=>{container.innerHTML+=`\n          <li class="item card" data-to="${course.url}">\n            <div class="thumbnail" style="background-image: url(${course.thumbnail})"></div>\n\n            <div class="info">\n              <h3><a href="${course.url}">${course.title}</a></h3>\n\n\n              <div class="rating">\n                <div>${course.rating.average}</div>\n                <div class="stars">\n                  ${getCourseStars(course.rating.average)}\n                </div>\n                <div>\n                  (${course.rating.total} Ratings)\n                </div>\n              </div>\n\n              <p>\n                ${course.description}\n              </p>\n              <div class="footer">\n                <div class="author">\n                  <div class="avatar" style="background-image: url(${course.author_pp})"></div>\n                  <div class="name">${course.author_name}</div>\n                </div>\n                <div class="price">${course.price}</div>\n              </div>\n            </div>\n          </li>\n        `}),0===data.length&&section.remove()})}document.addEventListener("DOMContentLoaded",e=>{courseBought(),getRecommendedCourses()});