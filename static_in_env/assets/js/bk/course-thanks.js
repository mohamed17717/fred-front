const bk="https://thegoodzone.pythonanywhere.com";function getBoughtCourseFromLocalStorage(){return JSON.parse(localStorage.getItem("bought")||"[]")}function setBoughtCourseInLocalStorage(e){const t=getBoughtCourseFromLocalStorage();console.log(typeof t),t.push(e),localStorage.setItem("bought",JSON.stringify(t))}function checkBoughtCourse(e){return getBoughtCourseFromLocalStorage().includes(e)}function courseBought(){const e=document.querySelector("#thanks-intro button");if(!e)return;const t=e.dataset.to,o=`${bk}/buy-course/${t}/`;checkBoughtCourse(t)||(fetch(o),setBoughtCourseInLocalStorage(t))}function getCourseStars(e){let t="";for(let o=0;o<5;o++)t+=e>.44?'<div class="icon icon-star-fill"></div>':'<div class="icon icon-star-outline"></div>',e--;return t}function getRecommendedCourses(){const e=document.querySelector("[data-courseid]");if(!e)return;const t=e.dataset.courseid,o=document.querySelector("#recommended-courses"),n=o.querySelector(".courses ul");fetch(`${bk}/random-related-courses/${t}/`).then(e=>200===e.status?e.json():[]).then(e=>{e.forEach(e=>{n.innerHTML+=`\n<li class="item card">\n  <div class="thumbnail" style="background-image: url(${e.thumbnail})"></div>\n\n  <div class="info">\n<h3><a href="${e.url}">${e.title}</a></h3>\n\n\n<div class="rating">\n <div>${e.rating.average}</div>\n <div class="stars">\n${getCourseStars(e.rating.average)}\n </div>\n <div>\n(${e.rating.total} Ratings)\n </div>\n</div>\n\n<p>\n ${e.description}\n</p>\n<div class="footer">\n <div class="author">\n<div class="avatar" style="background-image: url(${e.author_pp})"></div>\n<div class="name">${e.author_name}</div>\n </div>\n <div class="price">${e.price}</div>\n</div>\n  </div>\n</li>\n`}),0===e.length&&o.remove()})}document.addEventListener("DOMContentLoaded",e=>{courseBought(),getRecommendedCourses()});