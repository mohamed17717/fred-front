const bk="https://thegoodzone.pythonanywhere.com";function renderCategories(){const categoriesContainer=document.querySelector("#courses-intro .tags"),url=`${bk}/categories/`;fetch(url).then(res=>res.json()).then(categories=>{categories.forEach(category=>{categoriesContainer.innerHTML+=`\n          <a href="/p/courses?filter=${category.name}&page=1">${category.name}</a>\n        `})})}function getCourseStars(average){const count=5,star1='<div class="icon icon-star-fill"></div>',star0='<div class="icon icon-star-outline"></div>';let stars="";for(let i=0;i<5;i++)stars+=average>.44?star1:star0,average--;return stars}function courseCard(course){return`\n    <div class="item card" data-to="${course.url}">\n      <div class="thumbnail" style="background-image: url(${course.thumbnail})"></div>\n      <div class="info">\n        <h3><a href="${course.url}">${course.title}</a></h3>\n\n        <div class="rating">\n          <div>${course.rating.average}</div>\n          <div class="stars">\n            ${getCourseStars(course.rating.average)}\n          </div>\n          <div>\n            (${course.rating.total} Ratings)\n          </div>\n        </div>\n\n        <p>\n          ${course.description}\n        </p>\n        <div class="footer">\n          ${course.author_name?'<div class="author"><div class="avatar" style="flex-shrink: 0; background-image: url('+course.author_pp+')"></div><div class="name">'+course.author_name+"</div></div>":""}\n          <div class="price">${course.price}</div>\n        </div>\n      </div>\n    </div>\n  `}function getPath(number){let params=window.location.search;return 0===params.length?`?page=${number}`:(params.includes("page=")?params=params.replace(/page=\d+/,`page=${number}`):params+=`&page=${number}`,params)}function getURL(dPage){const params=new Map(location.search.slice(1).split("&").map(kv=>kv.split("=")));let page=dPage||decodeURI(params.get("page")||1),q,url=`${bk}`;return path=`/search/?q=${"meditation"}&page=${page}`,url+path}function renderCourses(){const section=document.querySelector("#courses-list"),coursesContainer=section.querySelector(".cards"),url=getURL();fetch(url).then(res=>res.json()).then(courses=>(courses.data.forEach(course=>{coursesContainer.innerHTML+=courseCard(course)}),0===courses.data.length&&coursesContainer.replaceWith(div({class:"empty-list-msg"},"Theris no courses right now.")),courses)).then(renderPagination)}function paginationLink(number,isActive=!1){return`<li class="${isActive?"active":""}"><a href="${getPath(number)}">${number}</a></li>`}function renderPagination(page){const pagination=document.querySelector("#courses-list .pagination");pagination.innerHTML=`\n    ${page.has_prev?'<a href="'+getPath(page.current_page-1)+'" class="btn prev"></a>':""}\n    \n      <ul>\n        ${page.has_prev?paginationLink(page.current_page-1):""}\n        ${paginationLink(page.current_page,!0)}\n        ${page.has_next?paginationLink(+page.current_page+1):""}\n        ${page.total_pages-page.current_page>2?"<li>...</li>"+paginationLink(page.total_pages):""}\n      </ul>\n\n    ${page.has_next?'<a href="'+getPath(+page.current_page+1)+'" class="btn next"></a>':""}\n  `}renderCourses(),renderCategories();