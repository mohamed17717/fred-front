const bk="https://thegoodzone.pythonanywhere.com";function renderCategories(){const e=document.querySelector("#courses-intro .tags");fetch(`${bk}/categories/`).then(e=>e.json()).then(n=>{n.forEach(n=>{e.innerHTML+=`\n <a href="?filter=${n.name}&page=1">${n.name}</a>\n `})})}function getCourseStars(e){let n="";for(let a=0;a<5;a++)n+=e>.44?'<div class="icon icon-star-fill"></div>':'<div class="icon icon-star-outline"></div>',e--;return n}function courseCard(e){return`\n <div class="item card">\n<div class="thumbnail" style="background-image: url(${e.thumbnail})"></div>\n<div class="info">\n  <h3><a href="${e.url}">${e.title}</a></h3>\n\n  <div class="rating">\n <div>${e.rating.average}</div>\n <div class="stars">\n${getCourseStars(e.rating.average)}\n </div>\n <div>\n(${e.rating.total} Ratings)\n </div>\n  </div>\n\n  <p>\n ${e.description}\n  </p>\n  <div class="footer">\n <div class="author">\n<div class="avatar" style="background-image: url(${e.author_pp})"></div>\n<div class="name">${e.author_name}</div>\n </div>\n <div class="price">${e.price}</div>\n  </div>\n</div>\n </div>\n  `}function getPath(e){let n=window.location.search;return 0===n.length?`?page=${e}`:(n.includes("page=")?n=n.replace(/page=\d+/,`page=${e}`):n+=`&page=${e}`,n)}function getURL(e){const n=new Map(location.search.slice(1).split("&").map(e=>e.split("=")));let a=e||decodeURI(n.get("page")||1),t=decodeURI(n.get("q")||""),r=decodeURI(n.get("filter")||""),i=`/courses/?page=${a}`;return t?i=`/search/?q=${t}&page=${a}`:r&&(i=`/filter/${r}/?page=${a}`),`${bk}`+i}function renderCourses(){const e=document.querySelector("#courses-list").querySelector(".cards"),n=getURL();console.log(n),fetch(n).then(e=>e.json()).then(n=>(console.log(n),n.data.forEach(n=>{e.innerHTML+=courseCard(n)}),0===n.data.length&&e.replaceWith(div({class:"empty-list-msg"},"Theris no courses right now.")),n)).then(renderPagination)}function paginationLink(e,n=!1){return console.log(e),`<li class="${n?"active":""}"><a href="${getPath(e)}">${e}</a></li>`}function renderPagination(e){document.querySelector("#courses-list .pagination").innerHTML=`\n ${e.has_prev?'<a href="'+getPath(e.current_page-1)+'" class="btn prev"></a>':""}\n \n<ul>\n  ${e.has_prev?paginationLink(e.current_page-1):""}\n  ${paginationLink(e.current_page,!0)}\n  ${e.has_next?paginationLink(+e.current_page+1):""}\n  ${e.total_pages-e.current_page>2?"<li>...</li>"+paginationLink(e.total_pages):""}\n</ul>\n\n ${e.has_next?'<a href="'+getPath(+e.current_page+1)+'" class="btn next"></a>':""}\n  `}renderCourses(),renderCategories();